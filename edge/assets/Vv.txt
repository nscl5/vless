ุนุงูู! ุจุฑุง ุงุถุงูู ฺฉุฑุฏู ุงู ุฏู ูุฎุฒูุ ุจุงุฏ ฺูุฏ ุชุบุฑ ุงุนูุงู ฺฉูู:

## ุชุบุฑุงุช ููุฑุฏ ูุงุฒ:

### 1. ุฏุฑ ูุงู `test-proxies.js` - ุชุงุจุน ุฌุฏุฏ ุจุฑุง fetch ฺฉุฑุฏู ุฏุงุฏูโูุง:

ุฏุฑ ุญุฏูุฏ ุฎุท 120 (ุจุนุฏ ุงุฒ ุชุงุจุน `processProxiesInBatches`), ุงู ฺฉุฏ ุฑู ุงุถุงูู ฺฉู:

```javascript
// ุชุงุจุน ุจุฑุง ุฏุฑุงูุช ูพุฑูฺฉุณโูุง ุงุฒ ูุฎุฒู ุงูู
async function fetchNauticaProxies() {
  try {
    console.log('Fetching proxies from Nautica repository...');
    const response = await fetch('https://raw.githubusercontent.com/FoolVPN-ID/Nautica/refs/heads/main/proxyList.txt', {
      headers: { 'User-Agent': 'Mozilla/5.0 (compatible; ProxyTester/1.0)' },
      signal: AbortSignal.timeout(15000)
    });
    
    if (!response.ok) throw new Error(`HTTP ${response.status}`);
    
    const content = await response.text();
    const proxies = [];
    
    content.split(/\r?\n/).forEach(line => {
      const parts = line.trim().split(',');
      if (parts.length >= 2) {
        const ip = parts[0].trim();
        const port = parts[1].trim();
        if (/^\d+\.\d+\.\d+\.\d+$/.test(ip) && port === '443') {
          proxies.push([ip, port]);
        }
      }
    });
    
    console.log(`Found ${proxies.length} port 443 proxies from Nautica`);
    return proxies;
  } catch (error) {
    console.error('Failed to fetch Nautica proxies:', error.message);
    return [];
  }
}

// ุชุงุจุน ุจุฑุง ุฏุฑุงูุช ูพุฑูฺฉุณโูุง ุงุฒ ูุฎุฒู ุฏูู
async function fetchNiRevilProxies() {
  try {
    console.log('Fetching proxies from NiREvil repository...');
    const response = await fetch('https://raw.githubusercontent.com/NiREvil/vless/refs/heads/main/sub/ProxyIP.md', {
      headers: { 'User-Agent': 'Mozilla/5.0 (compatible; ProxyTester/1.0)' },
      signal: AbortSignal.timeout(15000)
    });
    
    if (!response.ok) throw new Error(`HTTP ${response.status}`);
    
    const content = await response.text();
    const proxies = [];
    
    // ุงุณุชุฎุฑุงุฌ IP ูุง ุงุฒ ุจููฺฉ ูุง yaml
    const yamlBlocks = content.match(/```yaml\s*\n([^\`]+)\n```/g);
    if (yamlBlocks) {
      yamlBlocks.forEach(block => {
        const ip = block.replace(/```yaml\s*\n/, '').replace(/\n```/, '').trim();
        if (/^\d+\.\d+\.\d+\.\d+$/.test(ip)) {
          proxies.push([ip, '443']); // ููู ุฑู ุจุง ูพูุฑุช 443 ูุฑุถ ูฺฉูู
        }
      });
    }
    
    console.log(`Found ${proxies.length} proxies from NiREvil`);
    return proxies;
  } catch (error) {
    console.error('Failed to fetch NiREvil proxies:', error.message);
    return [];
  }
}
```

### 2. ุฏุฑ ูููู ูุงู - ุชุบุฑ ุชุงุจุน `main()`:

ุญุฏูุฏ ุฎุท 160ุ ุจุฎุด ุฎูุงูุฏู CSV ุฑู ุจุง ุงู ุฌุงฺฏุฒู ฺฉู:

```javascript
// ุฏุฑุงูุช ูพุฑูฺฉุณโูุง ุงุฒ ููุงุจุน ูุฎุชูู
const allProxySources = [];

// 1. ุฎูุงูุฏู ูุงู CSV ูุญู
const proxyFilePath = path.join(__dirname, '../sub/country_proxies/02_proxies.csv');
if (fs.existsSync(proxyFilePath)) {
  const rawContent = fs.readFileSync(proxyFilePath, 'utf-8');
  const lines = rawContent.split(/\r?\n/);
  
  console.log(`Processing CSV with ${lines.length} lines...`);
  
  for (const line of lines) {
    if (!line || line.startsWith('IP Address') || line.startsWith('๏ปฟIP Address')) continue;
    
    const parts = line.trim().split(',');
    if (parts.length >= 2) {
      const ip = parts[0].trim();
      const port = parts[1].trim();
      
      if (ip && port === '443' && /^\d+\.\d+\.\d+\.\d+$/.test(ip)) {
        allProxySources.push([ip, port]);
      }
    }
  }
  console.log(`Found ${allProxySources.length} proxies from local CSV`);
}

// 2. ุฏุฑุงูุช ุงุฒ ูุฎุงุฒู ุขููุงู
const nauticaProxies = await fetchNauticaProxies();
const niRevilProxies = await fetchNiRevilProxies();

allProxySources.push(...nauticaProxies);
allProxySources.push(...niRevilProxies);

// ุญุฐู ููุงุฑุฏ ุชฺฉุฑุงุฑ
const uniqueProxies = Array.from(
  new Map(allProxySources.map(([ip, port]) => [`${ip}:${port}`, [ip, port]])).values()
);

console.log(`Total unique proxies from all sources: ${uniqueProxies.length}`);
```

### 3. ุจูู ฺฉุฏ ุจุฏูู ุชุบุฑ ุจุงู ููููู!

ููุท ูุชุบุฑ `ipPortCombinations` ุฑู ุญุฐู ฺฉู ฺูู ุฏฺฏู ุงุณุชูุงุฏู ููุดู.

---

ุงู ุชุบุฑุงุช ุจุงุนุซ ูุดู ฺฉู:
- ุงุฒ 3 ููุจุน ูพุฑูฺฉุณ ุฏุฑุงูุช ฺฉูู
- ููุท ูพูุฑุช 443 ุฑู ููุชุฑ ฺฉูู  
- ุชฺฉุฑุงุฑโูุง ุฑู ุญุฐู ฺฉูู
- ูููู ูพุฑุฏุงุฒุด batch ู ุชุณุชโูุง ูุจู ุฑู ุงูุฌุงู ุจุฏู

ุญุงูุง ุจุงุฏ ุชุนุฏุงุฏ ุฎู ุจุดุชุฑ ูพุฑูฺฉุณ ุฏุงุดุชู ุจุงุด! ๐
